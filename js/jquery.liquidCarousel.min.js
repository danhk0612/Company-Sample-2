/*!
 * jquery.liquidCarousel.js (git@github.com:rin316/jquery.liquidCarousel.js.git)
 * jQuery carousel plugin.
 *
 * Lastupdate: 2014-01-14 fadeのロジックを自然な表示に変更。fadeDelayを削除
 * Version: 1.6
 * Require: jquery.js
 * Link: http://rin316.github.io/jquery.liquidCarousel/
 * Author: rin316 (Yuta Hayashi) [http://5am.jp]
 * License: MIT
 */
!function(a,b){var c,d;d={listSelector:".ui-carousel-list",itemSelector:"li",paginationListSelector:".ui-carousel-paginationList",paginationItemSelector:"li",prevSelector:".ui-carousel-prev",nextSelector:".ui-carousel-next",cloneClass:"ui-carousel-clone",currentClass:"ui-carousel-current",disableClass:"ui-carousel-disable",animate:"slide",easing:"swing",speed:500,vertical:!1,fadeZIndexBase:100,autoPlay:!1,autoPlayHoverStop:!0,autoPlayStopLastItem:!1,autoPlayInterval:5e3,autoPlayStartDelay:0,start:0,group:1,pos_x:"left",pos_x_fix:0,loop:!0,loopingDisabled:!1,listHeightType:"auto",currentHighlight:!0,resizeRefresh:!0,resizeTimer:250},c=function(b,c){var e=this;return e.o=a.extend({},d,c),e.$element=b,e.$list=e.$element.find(a(e.o.listSelector)),e.$item=e.$list.find(a(e.o.itemSelector)),e.$paginationList=e.$element.find(a(e.o.paginationListSelector)),e.$paginationItem=e.$paginationList.find(a(e.o.paginationItemSelector)),e.$prevNavi=e.$element.find(a(e.o.prevSelector)),e.$nextNavi=e.$element.find(a(e.o.nextSelector)),e.$allList=e.$paginationList.add(e.$list),e.$allItem=e.$paginationItem.add(e.$item),e.$allListAndNavi=e.$allList.add(e.$prevNavi).add(e.$nextNavi),e.elementSize=e.o.vertical?e.$element.height():e.$element.width(),e.itemSize=e.o.vertical?e.$item.outerHeight(!0):e.$item.outerWidth(!0),e.sizeProp=e.o.vertical?"height":"width",e.marginProp=e.o.vertical?"marginTop":"marginLeft",e.group=e.o.group,e.clonePrependNum=0,e.cloneAppendNum=0,e.index=e.o.start,e.isMoving=!1,"fade"===e.o.animate||e.$item.length<=1?(e.o.loop=!1,e.o.resizeRefresh=!1,e.$item.css({zIndex:e.o.fadeZIndexBase}),e.$item.eq(e.index).css({zIndex:e.o.fadeZIndexBase+1})):e.o.listHeightType=!1,e.init(),e},function(c){c.init=function(){var a=this;a.indexUpdate(a.index),a.o.loop&&a.makeClone(),"fade"===a.o.animate&&(a.$item.hide(),a.$item.eq(a.index).show()),a.setListStyle(),a.addCurrentClass(),a.o.currentHighlight&&a.highlightEffect(),a.o.autoPlay&&a.autoPlay(),a.o.loopingDisabled&&a.loopingDisabled(),a.o.resizeRefresh&&a.resizeRefresh(),a.$paginationItem.on("click",function(b){a.moveBind(a.$paginationItem.index(this)*a.group),b.preventDefault()}),a.$prevNavi.on("click",function(b){a.moveBind(a.index-a.group,this),b.preventDefault()}),a.$nextNavi.on("click",function(b){a.moveBind(a.index+a.group,this),b.preventDefault()})},c.indexUpdate=function(a,b){var c=this,d=a;return c.isMoving?!1:(c.o.loop&&"moved"!==b?(a<-c.group&&(d=c.$item.length-1),a>c.$item.length-1+c.group&&(d=0)):c.o.loop&&"moved"===b?(0>a&&(d=c.$item.length+a),a>c.$item.length-1&&(d=a-c.$item.length)):(c.group>1?0>a&&(d=(Math.ceil(c.$item.length/c.group)-1)*c.group):0>a&&(d=c.$item.length-1),a>c.$item.length-1&&(d=0)),c.index===d?!1:(c.index=d,!0))},c.makeClone=function(){var b,c,d=this;for(d.clonePrependNum=d.cloneAppendNum=Math.ceil(d.elementSize/d.itemSize),d.$list.find(a("."+d.o.cloneClass)).remove(),b=0,c=d.$item.length-1;b<d.clonePrependNum;b++)d.$list.prepend(d.$item.clone().addClass(d.o.cloneClass).removeClass(d.o.currentClass)[c]),0>=c?c=d.$item.length-1:c--;for(b=0,c=0;b<d.cloneAppendNum;b++)d.$list.append(d.$item.clone().addClass(d.o.cloneClass).removeClass(d.o.currentClass)[c]),c>=d.$item.length-1?c=0:c++},c.setListStyle=function(){var a=this,b={};b[a.sizeProp]=a.calcListSize()+"px",a.o.listHeightType||(b[a.marginProp]=a.calcListMargin()+"px"),a.$list.css(b)},c.calcListSize=function(){var a=this;if("max"===a.o.listHeightType);else if("auto"!==a.o.listHeightType)return(a.$item.length+a.clonePrependNum+a.cloneAppendNum)*a.itemSize},c.calcListMargin=function(){var a=this;return-(a.itemSize*(a.index+a.clonePrependNum)-a.calcPos_x())},c.calcPos_x=function(){var b=this;if(!isNaN(b.o.pos_x))return b.o.pos_x+b.o.pos_x_fix;if(a.isFunction(b.o.pos_x))return b.o.pos_x()+b.o.pos_x_fix;switch(b.o.pos_x){case"left":return 0+b.o.pos_x_fix;case"center":return b.elementSize/2-b.itemSize/2+b.o.pos_x_fix;case"right":return b.elementSize-b.itemSize+b.o.pos_x_fix;default:return 0}},c.moveBind=function(b,c){var d=this;return a(c).hasClass(d.o.disableClass)?!1:d.indexUpdate(b)?(d.addCurrentClass(),d.o.currentHighlight&&d.highlightEffect(),d.o.loopingDisabled&&d.loopingDisabled(),d.animate(),void 0):!1},c.animate=function(){var a=this;switch(a.o.animate){case"slide":a.animateSlide();break;case"fade":a.animateFade();break;default:a.animateSlide()}},c.animateSlide=function(){var a=this,b={};b[a.marginProp]=a.calcListMargin()+"px",a.isMoving||(a.isMoving=!0,a.$element.trigger("carousel:movestart"),a.$list.animate(b,{duration:a.o.speed,easing:a.o.easing,complete:function(){a.isMoving=!1,a.o.loop&&(a.indexUpdate(a.index,"moved"),a.setListStyle()),a.addCurrentClass(),a.o.currentHighlight&&a.highlightEffect(),a.$element.trigger("carousel:moveend")},queue:!1}))},c.animateFade=function(){var a=this;a.isMoving||(a.$element.trigger("carousel:movestart"),a.isMoving=!0,a.$item.css({zIndex:a.o.fadeZIndexBase}),a.$item.eq(a.index).css({zIndex:a.o.fadeZIndexBase+1}).fadeIn(a.o.speed,function(){a.$item.not(a.$item.eq(a.index)).hide(),a.setListStyle(),a.isMoving=!1,a.$element.trigger("carousel:moveend")}))},c.addCurrentClass=function(){var a,b=this;b.$allList.children().removeClass(b.o.currentClass),b.$list.children().eq(b.clonePrependNum+b.index).addClass(b.o.currentClass),a=b.index>b.$item.length-1?0:b.index<0?Math.floor((b.$item.length+b.index)/b.group):Math.floor(b.index/b.group),b.$paginationItem.eq(a).addClass(b.o.currentClass)},c.highlightEffect=function(){var b=this;b.$paginationItem.animate({opacity:.4},{duration:300,queue:!1}),b.$paginationItem+a("."+b.o.currentClass).animate({opacity:1},{duration:300,queue:!1})},c.autoPlay=function(){var a,b,c,d=this;c=d.o.autoPlayInterval>=40?d.o.autoPlayInterval:40,b=function(){d.o.autoPlayStopLastItem&&d.index>=d.$item.length-d.group?clearInterval(a):d.moveBind(d.index+1)},setTimeout(function(){a=setInterval(b,c)},d.o.autoPlayStartDelay),d.o.autoPlayHoverStop&&d.$allListAndNavi.hover(function(){clearInterval(a)},function(){a=setInterval(b,c)})},c.loopingDisabled=function(){var a=this;a.index-(a.group-1)<=0?a.$prevNavi.addClass(a.o.disableClass):a.$prevNavi.removeClass(a.o.disableClass),a.index+(a.group-1)>=a.$item.length-1?a.$nextNavi.addClass(a.o.disableClass):a.$nextNavi.removeClass(a.o.disableClass)},c.resizeRefresh=function(){var c=this;a(b).on("resize",function(){if(c.o.resizeTimer){var a=null,b=c.o.resizeTimer;a&&(clearTimeout(a),a=null),a=setTimeout(function(){c.elementSize=c.$element.outerWidth(!0),c.o.loop&&c.makeClone(),c.setListStyle(),a=null},b)}else c.elementSize=c.$element.outerWidth(!0),c.o.loop&&c.makeClone(),c.setListStyle()})}}(c.prototype),a.fn.liquidCarousel=function(b){return this.each(function(){var d=a(this);d.data("carousel",new c(d,b))})}}(jQuery,this);